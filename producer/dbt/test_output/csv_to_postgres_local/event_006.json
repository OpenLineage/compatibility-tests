{"eventTime": "2025-11-18T15:04:20.065737Z", "eventType": "START", "inputs": [{"facets": {"dataSource": {"_producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/client/python", "_schemaURL": "https://openlineage.io/spec/facets/1-0-1/DatasourceDatasetFacet.json#/$defs/DatasourceDatasetFacet", "name": "postgres://localhost:5432", "uri": "postgres://localhost:5432"}, "documentation": {"_producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/client/python", "_schemaURL": "https://openlineage.io/spec/facets/1-1-0/DocumentationDatasetFacet.json#/$defs/DocumentationDatasetFacet", "description": "Cleaned and standardized customer data"}, "schema": {"_producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/client/python", "_schemaURL": "https://openlineage.io/spec/facets/1-2-0/SchemaDatasetFacet.json#/$defs/SchemaDatasetFacet", "fields": [{"description": "Unique customer identifier", "fields": [], "name": "customer_id"}]}}, "name": "dbt_test.main.stg_customers", "namespace": "postgres://localhost:5432"}, {"facets": {"dataSource": {"_producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/client/python", "_schemaURL": "https://openlineage.io/spec/facets/1-0-1/DatasourceDatasetFacet.json#/$defs/DatasourceDatasetFacet", "name": "postgres://localhost:5432", "uri": "postgres://localhost:5432"}, "documentation": {"_producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/client/python", "_schemaURL": "https://openlineage.io/spec/facets/1-1-0/DocumentationDatasetFacet.json#/$defs/DocumentationDatasetFacet", "description": "Cleaned order data excluding cancelled orders"}, "schema": {"_producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/client/python", "_schemaURL": "https://openlineage.io/spec/facets/1-2-0/SchemaDatasetFacet.json#/$defs/SchemaDatasetFacet", "fields": [{"description": "Unique order identifier", "fields": [], "name": "order_id"}, {"description": "Foreign key to customers", "fields": [], "name": "customer_id"}]}}, "name": "dbt_test.main.stg_orders", "namespace": "postgres://localhost:5432"}], "job": {"facets": {"jobType": {"_producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/integration/dbt", "_schemaURL": "https://openlineage.io/spec/facets/2-0-3/JobTypeJobFacet.json#/$defs/JobTypeJobFacet", "integration": "DBT", "jobType": "MODEL", "processingType": "BATCH"}, "sql": {"_producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/client/python", "_schemaURL": "https://openlineage.io/spec/facets/1-1-0/SQLJobFacet.json#/$defs/SQLJobFacet", "dialect": "postgres", "query": "\n\nselect\n    c.customer_id,\n    c.customer_name,\n    c.email,\n    c.segment,\n    c.value_tier,\n    count(o.order_id) as total_orders,\n    sum(o.completed_amount) as total_revenue,\n    avg(o.completed_amount) as avg_order_value,\n    max(o.order_date) as last_order_date\nfrom \"dbt_test\".\"main\".\"stg_customers\" c\nleft join \"dbt_test\".\"main\".\"stg_orders\" o \n    on c.customer_id = o.customer_id\ngroup by \n    c.customer_id,\n    c.customer_name,\n    c.email,\n    c.segment,\n    c.value_tier"}}, "name": "dbt_test.main.openlineage_compatibility_test.customer_analytics", "namespace": "dbt"}, "outputs": [{"facets": {"columnLineage": {"_producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/client/python", "_schemaURL": "https://openlineage.io/spec/facets/1-2-0/ColumnLineageDatasetFacet.json#/$defs/ColumnLineageDatasetFacet", "dataset": [], "fields": {"avg_order_value": {"inputFields": [{"field": "completed_amount", "name": "dbt_test.main.stg_orders", "namespace": "postgres://localhost:5432", "transformations": []}]}, "customer_id": {"inputFields": [{"field": "customer_id", "name": "dbt_test.main.stg_customers", "namespace": "postgres://localhost:5432", "transformations": []}]}, "customer_name": {"inputFields": [{"field": "customer_name", "name": "dbt_test.main.stg_customers", "namespace": "postgres://localhost:5432", "transformations": []}]}, "email": {"inputFields": [{"field": "email", "name": "dbt_test.main.stg_customers", "namespace": "postgres://localhost:5432", "transformations": []}]}, "last_order_date": {"inputFields": [{"field": "order_date", "name": "dbt_test.main.stg_orders", "namespace": "postgres://localhost:5432", "transformations": []}]}, "segment": {"inputFields": [{"field": "segment", "name": "dbt_test.main.stg_customers", "namespace": "postgres://localhost:5432", "transformations": []}]}, "total_orders": {"inputFields": [{"field": "order_id", "name": "dbt_test.main.stg_orders", "namespace": "postgres://localhost:5432", "transformations": []}]}, "total_revenue": {"inputFields": [{"field": "completed_amount", "name": "dbt_test.main.stg_orders", "namespace": "postgres://localhost:5432", "transformations": []}]}, "value_tier": {"inputFields": [{"field": "value_tier", "name": "dbt_test.main.stg_customers", "namespace": "postgres://localhost:5432", "transformations": []}]}}}, "dataSource": {"_producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/client/python", "_schemaURL": "https://openlineage.io/spec/facets/1-0-1/DatasourceDatasetFacet.json#/$defs/DatasourceDatasetFacet", "name": "postgres://localhost:5432", "uri": "postgres://localhost:5432"}, "documentation": {"_producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/client/python", "_schemaURL": "https://openlineage.io/spec/facets/1-1-0/DocumentationDatasetFacet.json#/$defs/DocumentationDatasetFacet", "description": "Customer analytics with aggregated metrics"}, "schema": {"_producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/client/python", "_schemaURL": "https://openlineage.io/spec/facets/1-2-0/SchemaDatasetFacet.json#/$defs/SchemaDatasetFacet", "fields": [{"description": "Unique customer identifier", "fields": [], "name": "customer_id"}, {"description": "Total completed revenue per customer", "fields": [], "name": "total_revenue"}]}}, "name": "dbt_test.main.customer_analytics", "namespace": "postgres://localhost:5432", "outputFacets": {"outputStatistics": {"_producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/client/python", "_schemaURL": "https://openlineage.io/spec/facets/1-0-2/OutputStatisticsOutputDatasetFacet.json#/$defs/OutputStatisticsOutputDatasetFacet", "rowCount": 5}}}], "producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/integration/dbt", "run": {"facets": {"dbt_run": {"_producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/client/python", "_schemaURL": "https://github.com/OpenLineage/OpenLineage/tree/main/integration/common/openlineage/schema/dbt-run-run-facet.json", "dbt_runtime": "core", "invocation_id": "e49bb33a-4b62-417d-a378-0d218608b125", "profile_name": "openlineage_compatibility_test", "project_name": "openlineage_compatibility_test", "project_version": "1.0.0"}, "dbt_version": {"_producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/client/python", "_schemaURL": "https://github.com/OpenLineage/OpenLineage/tree/main/integration/common/openlineage/schema/dbt-version-run-facet.json", "version": "1.10.15"}, "parent": {"_producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/client/python", "_schemaURL": "https://openlineage.io/spec/facets/1-1-0/ParentRunFacet.json#/$defs/ParentRunFacet", "job": {"name": "dbt-run-openlineage_compatibility_test", "namespace": "dbt"}, "run": {"runId": "019a977e-6c3f-7b18-a638-05655c338077"}}, "processing_engine": {"_producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/client/python", "_schemaURL": "https://openlineage.io/spec/facets/1-1-1/ProcessingEngineRunFacet.json#/$defs/ProcessingEngineRunFacet", "name": "dbt", "openlineageAdapterVersion": "1.40.0", "version": "1.10.15"}, "tags": {"_producer": "https://github.com/OpenLineage/OpenLineage/tree/1.40.0/client/python", "_schemaURL": "https://openlineage.io/spec/facets/1-0-0/TagsRunFacet.json#/$defs/TagsRunFacet", "tags": [{"key": "openlineage_client_version", "source": "OPENLINEAGE_CLIENT", "value": "1.40.0"}]}}, "runId": "019a977e-cd5e-71fb-a982-ec11b80e5b01"}, "schemaURL": "https://openlineage.io/spec/2-0-2/OpenLineage.json#/$defs/RunEvent"}
